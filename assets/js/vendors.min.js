jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,i,n,o){return jQuery.easing[jQuery.easing.def](e,t,i,n,o)},easeInQuad:function(e,t,i,n,o){return n*(t/=o)*t+i},easeOutQuad:function(e,t,i,n,o){return-n*(t/=o)*(t-2)+i},easeInOutQuad:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,n,o){return n*(t/=o)*t*t+i},easeOutCubic:function(e,t,i,n,o){return n*((t=t/o-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,n,o){return n*(t/=o)*t*t*t+i},easeOutQuart:function(e,t,i,n,o){return-n*((t=t/o-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t*t+i:-n/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,n,o){return n*(t/=o)*t*t*t*t+i},easeOutQuint:function(e,t,i,n,o){return n*((t=t/o-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t*t*t+i:n/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,n,o){return-n*Math.cos(t/o*(Math.PI/2))+n+i},easeOutSine:function(e,t,i,n,o){return n*Math.sin(t/o*(Math.PI/2))+i},easeInOutSine:function(e,t,i,n,o){return-n/2*(Math.cos(Math.PI*t/o)-1)+i},easeInExpo:function(e,t,i,n,o){return 0==t?i:n*Math.pow(2,10*(t/o-1))+i},easeOutExpo:function(e,t,i,n,o){return t==o?i+n:n*(-Math.pow(2,-10*t/o)+1)+i},easeInOutExpo:function(e,t,i,n,o){return 0==t?i:t==o?i+n:(t/=o/2)<1?n/2*Math.pow(2,10*(t-1))+i:n/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(e,t,i,n,o){return-n*(Math.sqrt(1-(t/=o)*t)-1)+i},easeOutCirc:function(e,t,i,n,o){return n*Math.sqrt(1-(t=t/o-1)*t)+i},easeInOutCirc:function(e,t,i,n,o){return(t/=o/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+i:n/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,n,o){var s=1.70158,a=0,r=n;if(0==t)return i;if(1==(t/=o))return i+n;if(a||(a=.3*o),r<Math.abs(n)){r=n;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(n/r);return-(r*Math.pow(2,10*(t-=1))*Math.sin((t*o-s)*(2*Math.PI)/a))+i},easeOutElastic:function(e,t,i,n,o){var s=1.70158,a=0,r=n;if(0==t)return i;if(1==(t/=o))return i+n;if(a||(a=.3*o),r<Math.abs(n)){r=n;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(n/r);return r*Math.pow(2,-10*t)*Math.sin((t*o-s)*(2*Math.PI)/a)+n+i},easeInOutElastic:function(e,t,i,n,o){var s=1.70158,a=0,r=n;if(0==t)return i;if(2==(t/=o/2))return i+n;if(a||(a=o*(.3*1.5)),r<Math.abs(n)){r=n;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(n/r);return t<1?-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t*o-s)*(2*Math.PI)/a))+i:r*Math.pow(2,-10*(t-=1))*Math.sin((t*o-s)*(2*Math.PI)/a)*.5+n+i},easeInBack:function(e,t,i,n,o,s){return void 0==s&&(s=1.70158),n*(t/=o)*t*((s+1)*t-s)+i},easeOutBack:function(e,t,i,n,o,s){return void 0==s&&(s=1.70158),n*((t=t/o-1)*t*((s+1)*t+s)+1)+i},easeInOutBack:function(e,t,i,n,o,s){return void 0==s&&(s=1.70158),(t/=o/2)<1?n/2*(t*t*(((s*=1.525)+1)*t-s))+i:n/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+i},easeInBounce:function(e,t,i,n,o){return n-jQuery.easing.easeOutBounce(e,o-t,0,n,o)+i},easeOutBounce:function(e,t,i,n,o){return(t/=o)<1/2.75?n*(7.5625*t*t)+i:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+i:n*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,n,o){return t<o/2?.5*jQuery.easing.easeInBounce(e,2*t,0,n,o)+i:.5*jQuery.easing.easeOutBounce(e,2*t-o,0,n,o)+.5*n+i}}),function(e,t,i){function n(i,n,o){var s=t.createElement(i);return n&&(s.id=Z+n),o&&(s.style.cssText=o),e(s)}function o(){return i.innerHeight?i.innerHeight:e(i).height()}function s(e){var t=M.length,i=(K+e)%t;return i<0?t+i:i}function a(e,t){return Math.round((/%/.test(e)?("x"===t?I.width():o())/100:1)*parseInt(e,10))}function r(e,t){return e.photo||e.photoRegex.test(t)}function l(e,t){return e.retinaUrl&&i.devicePixelRatio>1?t.replace(e.photoRegex,e.retinaSuffix):t}function d(e){"contains"in v[0]&&!v[0].contains(e.target)&&(e.stopPropagation(),v.focus())}function h(){var t,i=e.data(W,Y);null==i?(B=e.extend({},X),console&&console.log&&console.log("Error: cboxElement missing settings object")):B=e.extend({},i);for(t in B)e.isFunction(B[t])&&"on"!==t.slice(0,2)&&(B[t]=B[t].call(W));B.rel=B.rel||W.rel||e(W).data("rel")||"nofollow",B.href=B.href||e(W).attr("href"),B.title=B.title||W.title,"string"==typeof B.href&&(B.href=e.trim(B.href))}function c(i,n){e(t).trigger(i),re.triggerHandler(i),e.isFunction(n)&&n.call(W)}function f(i){z||(W=i,h(),M=e(W),K=0,"nofollow"!==B.rel&&(M=e("."+ee).filter(function(){var t,i=e.data(this,Y);return i&&(t=e(this).data("rel")||i.rel||this.rel),t===B.rel}),K=M.index(W),K===-1&&(M=M.add(W),K=M.length-1)),g.css({opacity:parseFloat(B.opacity),cursor:B.overlayClose?"pointer":"auto",visibility:"visible"}).show(),G&&v.add(g).removeClass(G),B.className&&v.add(g).addClass(B.className),G=B.className,B.closeButton?H.html(B.close).appendTo(x):H.appendTo("<div/>"),A||(A=q=!0,v.css({visibility:"hidden",display:"block"}),T=n(le,"LoadedContent","width:0; height:0; overflow:hidden"),x.css({width:"",height:""}).append(T),F=y.height()+S.height()+x.outerHeight(!0)-x.height(),j=b.width()+C.width()+x.outerWidth(!0)-x.width(),D=T.outerHeight(!0),R=T.outerWidth(!0),B.w=a(B.initialWidth,"x"),B.h=a(B.initialHeight,"y"),T.css({width:"",height:B.h}),J.position(),c(te,B.onOpen),L.add(k).hide(),v.focus(),B.trapFocus&&t.addEventListener&&(t.addEventListener("focus",d,!0),re.one(se,function(){t.removeEventListener("focus",d,!0)})),B.returnFocus&&re.one(se,function(){e(W).focus()})),w())}function u(){!v&&t.body&&(V=!1,I=e(i),v=n(le).attr({id:Y,"class":e.support.opacity===!1?Z+"IE":"",role:"dialog",tabindex:"-1"}).hide(),g=n(le,"Overlay").hide(),_=e([n(le,"LoadingOverlay")[0],n(le,"LoadingGraphic")[0]]),m=n(le,"Wrapper"),x=n(le,"Content").append(k=n(le,"Title"),$=n(le,"Current"),P=e('<button type="button"/>').attr({id:Z+"Previous"}),Q=e('<button type="button"/>').attr({id:Z+"Next"}),E=n("button","Slideshow"),_),H=e('<button type="button"/>').attr({id:Z+"Close"}),m.append(n(le).append(n(le,"TopLeft"),y=n(le,"TopCenter"),n(le,"TopRight")),n(le,!1,"clear:left").append(b=n(le,"MiddleLeft"),x,C=n(le,"MiddleRight")),n(le,!1,"clear:left").append(n(le,"BottomLeft"),S=n(le,"BottomCenter"),n(le,"BottomRight"))).find("div div").css({"float":"left"}),O=n(le,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),L=Q.add(P).add($).add(E),e(t.body).append(g,v.append(m,O)))}function p(){function i(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),f(this))}return!!v&&(V||(V=!0,Q.click(function(){J.next()}),P.click(function(){J.prev()}),H.click(function(){J.close()}),g.click(function(){B.overlayClose&&J.close()}),e(t).bind("keydown."+Z,function(e){var t=e.keyCode;A&&B.escKey&&27===t&&(e.preventDefault(),J.close()),A&&B.arrowKey&&M[1]&&!e.altKey&&(37===t?(e.preventDefault(),P.click()):39===t&&(e.preventDefault(),Q.click()))}),e.isFunction(e.fn.on)?e(t).on("click."+Z,"."+ee,i):e("."+ee).live("click."+Z,i)),!0)}function w(){var o,s,d,f=J.prep,u=++de;q=!0,N=!1,W=M[K],h(),c(ae),c(ie,B.onLoad),B.h=B.height?a(B.height,"y")-D-F:B.innerHeight&&a(B.innerHeight,"y"),B.w=B.width?a(B.width,"x")-R-j:B.innerWidth&&a(B.innerWidth,"x"),B.mw=B.w,B.mh=B.h,B.maxWidth&&(B.mw=a(B.maxWidth,"x")-R-j,B.mw=B.w&&B.w<B.mw?B.w:B.mw),B.maxHeight&&(B.mh=a(B.maxHeight,"y")-D-F,B.mh=B.h&&B.h<B.mh?B.h:B.mh),o=B.href,U=setTimeout(function(){_.show()},100),B.inline?(d=n(le).hide().insertBefore(e(o)[0]),re.one(ae,function(){d.replaceWith(T.children())}),f(e(o))):B.iframe?f(" "):B.html?f(B.html):r(B,o)?(o=l(B,o),N=t.createElement("img"),e(N).addClass(Z+"Photo").bind("error",function(){B.title=!1,f(n(le,"Error").html(B.imgError))}).one("load",function(){var t;u===de&&(e.each(["alt","longdesc","aria-describedby"],function(t,i){var n=e(W).attr(i)||e(W).attr("data-"+i);n&&N.setAttribute(i,n)}),B.retinaImage&&i.devicePixelRatio>1&&(N.height=N.height/i.devicePixelRatio,N.width=N.width/i.devicePixelRatio),B.scalePhotos&&(s=function(){N.height-=N.height*t,N.width-=N.width*t},B.mw&&N.width>B.mw&&(t=(N.width-B.mw)/N.width,s()),B.mh&&N.height>B.mh&&(t=(N.height-B.mh)/N.height,s())),B.h&&(N.style.marginTop=Math.max(B.mh-N.height,0)/2+"px"),M[1]&&(B.loop||M[K+1])&&(N.style.cursor="pointer",N.onclick=function(){J.next()}),N.style.width=N.width+"px",N.style.height=N.height+"px",setTimeout(function(){f(N)},1))}),setTimeout(function(){N.src=o},1)):o&&O.load(o,B.data,function(t,i){u===de&&f("error"===i?n(le,"Error").html(B.xhrError):e(this).contents())})}var g,v,m,x,y,b,C,S,M,I,T,O,_,k,$,E,Q,P,H,L,B,F,j,D,R,W,K,N,A,q,z,U,J,G,V,X={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"Company {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},Y="colorbox",Z="cbox",ee=Z+"Element",te=Z+"_open",ie=Z+"_load",ne=Z+"_complete",oe=Z+"_cleanup",se=Z+"_closed",ae=Z+"_purge",re=e("<a/>"),le="div",de=0,he={},ce=function(){function e(){clearTimeout(a)}function t(){(B.loop||M[K+1])&&(e(),a=setTimeout(J.next,B.slideshowSpeed))}function i(){E.html(B.slideshowStop).unbind(l).one(l,n),re.bind(ne,t).bind(ie,e),v.removeClass(r+"off").addClass(r+"on")}function n(){e(),re.unbind(ne,t).unbind(ie,e),E.html(B.slideshowStart).unbind(l).one(l,function(){J.next(),i()}),v.removeClass(r+"on").addClass(r+"off")}function o(){s=!1,E.hide(),e(),re.unbind(ne,t).unbind(ie,e),v.removeClass(r+"off "+r+"on")}var s,a,r=Z+"Slideshow_",l="click."+Z;return function(){s?B.slideshow||(re.unbind(oe,o),o()):B.slideshow&&M[1]&&(s=!0,re.one(oe,o),B.slideshowAuto?i():n(),E.show())}}();e.colorbox||(e(u),J=e.fn[Y]=e[Y]=function(t,i){var n=this;if(t=t||{},u(),p()){if(e.isFunction(n))n=e("<a/>"),t.open=!0;else if(!n[0])return n;i&&(t.onComplete=i),n.each(function(){e.data(this,Y,e.extend({},e.data(this,Y)||X,t))}).addClass(ee),(e.isFunction(t.open)&&t.open.call(n)||t.open)&&f(n[0])}return n},J.position=function(t,i){function n(){y[0].style.width=S[0].style.width=x[0].style.width=parseInt(v[0].style.width,10)-j+"px",x[0].style.height=b[0].style.height=C[0].style.height=parseInt(v[0].style.height,10)-F+"px"}var s,r,l,d=0,h=0,c=v.offset();if(I.unbind("resize."+Z),v.css({top:-9e4,left:-9e4}),r=I.scrollTop(),l=I.scrollLeft(),B.fixed?(c.top-=r,c.left-=l,v.css({position:"fixed"})):(d=r,h=l,v.css({position:"absolute"})),h+=B.right!==!1?Math.max(I.width()-B.w-R-j-a(B.right,"x"),0):B.left!==!1?a(B.left,"x"):Math.round(Math.max(I.width()-B.w-R-j,0)/2),d+=B.bottom!==!1?Math.max(o()-B.h-D-F-a(B.bottom,"y"),0):B.top!==!1?a(B.top,"y"):Math.round(Math.max(o()-B.h-D-F,0)/2),v.css({top:c.top,left:c.left,visibility:"visible"}),m[0].style.width=m[0].style.height="9999px",s={width:B.w+R+j,height:B.h+D+F,top:d,left:h},t){var f=0;e.each(s,function(e){if(s[e]!==he[e])return void(f=t)}),t=f}he=s,t||v.css(s),v.dequeue().animate(s,{duration:t||0,complete:function(){n(),q=!1,m[0].style.width=B.w+R+j+"px",m[0].style.height=B.h+D+F+"px",B.reposition&&setTimeout(function(){I.bind("resize."+Z,J.position)},1),i&&i()},step:n})},J.resize=function(e){var t;A&&(e=e||{},e.width&&(B.w=a(e.width,"x")-R-j),e.innerWidth&&(B.w=a(e.innerWidth,"x")),T.css({width:B.w}),e.height&&(B.h=a(e.height,"y")-D-F),e.innerHeight&&(B.h=a(e.innerHeight,"y")),e.innerHeight||e.height||(t=T.scrollTop(),T.css({height:"auto"}),B.h=T.height()),T.css({height:B.h}),t&&T.scrollTop(t),J.position("none"===B.transition?0:B.speed))},J.prep=function(i){function o(){return B.w=B.w||T.width(),B.w=B.mw&&B.mw<B.w?B.mw:B.w,B.w}function a(){return B.h=B.h||T.height(),B.h=B.mh&&B.mh<B.h?B.mh:B.h,B.h}if(A){var d,h="none"===B.transition?0:B.speed;T.empty().remove(),T=n(le,"LoadedContent").append(i),T.hide().appendTo(O.show()).css({width:o(),overflow:B.scrolling?"auto":"hidden"}).css({height:a()}).prependTo(x),O.hide(),e(N).css({"float":"none"}),d=function(){function i(){e.support.opacity===!1&&v[0].style.removeAttribute("filter")}var o,a,d=M.length,f="frameBorder",u="allowTransparency";A&&(a=function(){clearTimeout(U),_.hide(),c(ne,B.onComplete)},k.html(B.title).add(T).show(),d>1?("string"==typeof B.current&&$.html(B.current.replace("{current}",K+1).replace("{total}",d)).show(),Q[B.loop||K<d-1?"show":"hide"]().html(B.next),P[B.loop||K?"show":"hide"]().html(B.previous),ce(),B.preloading&&e.each([s(-1),s(1)],function(){var i,n,o=M[this],s=e.data(o,Y);s&&s.href?(i=s.href,e.isFunction(i)&&(i=i.call(o))):i=e(o).attr("href"),i&&r(s,i)&&(i=l(s,i),n=t.createElement("img"),n.src=i)})):L.hide(),B.iframe?(o=n("iframe")[0],f in o&&(o[f]=0),u in o&&(o[u]="true"),B.scrolling||(o.scrolling="no"),e(o).attr({src:B.href,name:(new Date).getTime(),"class":Z+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",a).appendTo(T),re.one(ae,function(){o.src="//about:blank"}),B.fastIframe&&e(o).trigger("load")):a(),"fade"===B.transition?v.fadeTo(h,1,i):i())},"fade"===B.transition?v.fadeTo(h,0,function(){J.position(0,d)}):J.position(h,d)}},J.next=function(){!q&&M[1]&&(B.loop||M[K+1])&&(K=s(1),f(M[K]))},J.prev=function(){!q&&M[1]&&(B.loop||K)&&(K=s(-1),f(M[K]))},J.close=function(){A&&!z&&(z=!0,A=!1,c(oe,B.onCleanup),I.unbind("."+Z),g.fadeTo(B.fadeOut||0,0),v.stop().fadeTo(B.fadeOut||0,0,function(){v.add(g).css({opacity:1,cursor:"auto"}).hide(),c(ae),T.empty().remove(),setTimeout(function(){z=!1,c(se,B.onClosed)},1)}))},J.remove=function(){v&&(v.stop(),e.colorbox.close(),v.stop().remove(),g.remove(),z=!1,v=null,e("."+ee).removeData(Y).removeClass(ee),e(t).unbind("click."+Z))},J.element=function(){return e(W)},J.settings=X)}(jQuery,document,window),function(e){function t(e){var t=e.find(".fs-option:not(.hidden)").length>0;e.find(".fs-no-results").toggleClass("hidden",t)}function n(e){e.find(".fs-option.hl").removeClass("hl"),e.find(".fs-search input").focus(),window.fSelect.idx=-1}function o(e){var t=e.find(".fs-options"),i=e.find(".fs-option.hl"),n=i.offset().top+t.scrollTop(),o=n+i.outerHeight(),s=t.offset().top+t.scrollTop(),a=s+t.outerHeight();if(o>a){var r=t.scrollTop()+o-a;t.scrollTop(r)}else if(n<s){var r=t.scrollTop()-s-n;t.scrollTop(r)}}function s(e){window.fSelect.active_el=e,window.fSelect.active_id=e.data("id"),window.fSelect.initial_values=e.find("select").val(),e.find(".fs-dropdown").removeClass("hidden"),e.addClass("fs-open"),n(e),t(e)}function a(t){if("undefined"==typeof t&&null!=window.fSelect.active_el&&(t=window.fSelect.active_el),"undefined"!=typeof t){var i=window.fSelect.initial_values,n=t.find("select").val();JSON.stringify(i)!=JSON.stringify(n)&&e(document).trigger("fs:closed",t)}e(".fs-wrap").removeClass("fs-open"),e(".fs-dropdown").addClass("hidden"),window.fSelect.active_el=null,window.fSelect.active_id=null,window.fSelect.last_choice=null}String.prototype.unaccented=function(){for(var e=[/[\300-\306]/g,/[\340-\346]/g,/[\310-\313]/g,/[\350-\353]/g,/[\314-\317]/g,/[\354-\357]/g,/[\322-\330]/g,/[\362-\370]/g,/[\331-\334]/g,/[\371-\374]/g,/[\321]/g,/[\361]/g,/[\307]/g,/[\347]/g],t=["A","a","E","e","I","i","O","o","U","u","N","n","C","c"],i=this,n=0;n<e.length;n++)i=i.replace(e[n],t[n]);return i},e.fn.fSelect=function(t){function i(t,i){this.$select=e(t),this.settings=i,this.create()}if("string"==typeof t)var n=t;else var n=e.extend({placeholder:"Select some options",numDisplayed:3,overflowText:"{n} selected",searchText:"Search",noResultsText:"No results found",showSearch:!0,optionFormatter:!1},t);return i.prototype={create:function(){this.settings.multiple=this.$select.is("[multiple]");var e=this.settings.multiple?" multiple":"";this.$select.wrap('<div class="fs-wrap'+e+'" tabindex="0" />'),this.$select.before('<div class="fs-label-wrap"><div class="fs-label">'+this.settings.placeholder+'</div><span class="fs-arrow"></span></div>'),this.$select.before('<div class="fs-dropdown hidden"><div class="fs-options"></div></div>'),this.$select.addClass("hidden"),this.$wrap=this.$select.closest(".fs-wrap"),this.$wrap.data("id",window.fSelect.num_items),window.fSelect.num_items++,this.reload()},reload:function(){if(this.settings.showSearch){var e='<div class="fs-search"><input type="search" placeholder="'+this.settings.searchText+'" /></div>';this.$wrap.find(".fs-dropdown").prepend(e)}if(""!==this.settings.noResultsText){var t='<div class="fs-no-results hidden">'+this.settings.noResultsText+"</div>";this.$wrap.find(".fs-options").before(t)}this.idx=0,this.optgroup=0,this.selected=[].concat(this.$select.val());var i=this.buildOptions(this.$select);this.$wrap.find(".fs-options").html(i),this.reloadDropdownLabel()},destroy:function(){this.$wrap.find(".fs-label-wrap").remove(),this.$wrap.find(".fs-dropdown").remove(),this.$select.unwrap().removeClass("hidden")},buildOptions:function(t){var i=this,n="";return t.children().each(function(t,o){var s=e(o);if("optgroup"==s.prop("nodeName").toLowerCase())n+='<div class="fs-optgroup-label" data-group="'+i.optgroup+'">'+s.prop("label")+"</div>",n+=i.buildOptions(s),i.optgroup++;else{var a=s.prop("value");if(0<i.idx||""!=a||!i.settings.multiple){var r=s.is(":disabled")?" disabled":"",l=-1<e.inArray(a,i.selected)?" selected":"",d=" g"+i.optgroup,h='<div class="fs-option'+l+r+d+'" data-value="'+a+'" data-index="'+i.idx+'"><span class="fs-checkbox"><i></i></span><div class="fs-option-label">'+s.html()+"</div></div>";"function"==typeof i.settings.optionFormatter&&(h=i.settings.optionFormatter(h)),n+=h,i.idx++}}}),n},reloadDropdownLabel:function(){var t=this.settings,i=[];this.$wrap.find(".fs-option.selected").each(function(t,n){i.push(e(n).find(".fs-option-label").html())}),i=i.length<1?t.placeholder:i.length>t.numDisplayed?t.overflowText.replace("{n}",i.length):i.join(", "),this.$wrap.find(".fs-label").html(i),this.$wrap.toggleClass("fs-default",i===t.placeholder),this.$select.change()}},this.each(function(){var t=e(this).data("fSelect");t||(t=new i(this,n),e(this).data("fSelect",t)),"string"==typeof n&&t[n]()})},window.fSelect={num_items:0,active_id:null,active_el:null,last_choice:null,idx:-1},e(document).on("click",".fs-option:not(.hidden, .disabled)",function(t){var n=e(this).closest(".fs-wrap"),o=!1;if(!n.hasClass("fs-disabled")){if(n.hasClass("multiple")){var s=[];if(t.shiftKey&&null!=window.fSelect.last_choice){var r=parseInt(e(this).attr("data-index")),l=!e(this).hasClass("selected"),d=Math.min(window.fSelect.last_choice,r),h=Math.max(window.fSelect.last_choice,r);for(i=d;i<=h;i++)n.find(".fs-option[data-index="+i+"]").not(".hidden, .disabled").each(function(){e(this).toggleClass("selected",l)})}else window.fSelect.last_choice=parseInt(e(this).attr("data-index")),e(this).toggleClass("selected");n.find(".fs-option.selected").each(function(t,i){s.push(e(i).attr("data-value"))})}else{var s=e(this).attr("data-value");n.find(".fs-option").removeClass("selected"),e(this).addClass("selected"),o=!0}n.find("select").val(s),n.find("select").fSelect("reloadDropdownLabel"),e(document).trigger("fs:changed",n),o&&a(n)}}),e(document).on("keyup",".fs-search input",function(i){if(40==i.which)return void e(this).blur();var o=e(this).closest(".fs-wrap"),s=/[|\\{}()[\]^$+*?.]/g,a=e(this).val().replace(s,"\\$&");o.find(".fs-option, .fs-optgroup-label").removeClass("hidden"),""!=a&&(o.find(".fs-option").each(function(){var t=new RegExp(a.unaccented(),"gi"),i=e(this).find(".fs-option-label").text().unaccented();null===i.match(t)&&e(this).addClass("hidden")}),o.find(".fs-optgroup-label").each(function(){var t=e(this).attr("data-group"),i=e(this).closest(".fs-options").find(".fs-option.g"+t+":not(.hidden)").length;i<1&&e(this).addClass("hidden")})),n(o),t(o)}),e(document).on("click",function(t){var i=e(t.target),n=i.closest(".fs-wrap");if(0<n.length){if(n.data("id")!==window.fSelect.active_id&&a(),i.hasClass("fs-label")||i.hasClass("fs-arrow")){var o=n.find(".fs-dropdown").hasClass("hidden");o?s(n):a(n)}}else a()}),e(document).on("keydown",function(t){var i=window.fSelect.active_el,n=e(t.target);if(n.hasClass("fs-wrap")){if(32==t.which||13==t.which)return t.preventDefault(),void n.find(".fs-label").trigger("click")}else if(0<n.closest(".fs-search").length){if(32==t.which)return}else if(null===i)return;if(38==t.which){t.preventDefault(),i.find(".fs-option.hl").removeClass("hl");var s=i.find(".fs-option[data-index="+window.fSelect.idx+"]"),r=s.prevAll(".fs-option:not(.hidden, .disabled)");r.length>0?(window.fSelect.idx=parseInt(r.attr("data-index")),i.find(".fs-option[data-index="+window.fSelect.idx+"]").addClass("hl"),o(i)):(window.fSelect.idx=-1,i.find(".fs-search input").focus())}else if(40==t.which){t.preventDefault();var s=i.find(".fs-option[data-index="+window.fSelect.idx+"]");if(s.length<1)var l=i.find(".fs-option:not(.hidden, .disabled):first");else var l=s.nextAll(".fs-option:not(.hidden, .disabled)");l.length>0&&(window.fSelect.idx=parseInt(l.attr("data-index")),i.find(".fs-option.hl").removeClass("hl"),i.find(".fs-option[data-index="+window.fSelect.idx+"]").addClass("hl"),o(i))}else 32==t.which||13==t.which?(t.preventDefault(),i.find(".fs-option.hl").click()):27==t.which&&a(i)})}(jQuery);